(()=>{"use strict";const e=function(e){var t=document.getElementById(e),n=document.createElement("div");n.style.cssText="font-size: 2rem; color: #ffffff",t.addEventListener("submit",(function(e){e.preventDefault(),t.appendChild(n),n.innerHTML='<img src="./images/loader.svg" alt="Загрузка...">';var o=new FormData(t);t.reset(),function(e){return fetch("./server.php",{method:"POST",headers:{"Content-Type":"multipart/form-data"},body:e})}(o).then((function(e){if(200!==e.status)throw new Error("Status network not 200");n.textContent="Спасибо! Мы скоро с Вами свяжемся!"})).catch((function(e){n.textContent="Что-то пошло не так...",console.error(e)}))}))};var t,n,o,r,a,c,l;(function(e){var t=document.getElementById("timer-hours"),n=document.getElementById("timer-minutes"),o=document.getElementById("timer-seconds"),r=function(e){return("0"+e).slice(-2)},a=function(){var e=new Date("14 March 2021").getTime(),t=(new Date).getTime(),n=t>e,o=(e-t)/1e3,a=r(Math.floor(o%60)),c=r(Math.floor(o/60%60));return{timeRemaining:o,hours:r(Math.floor(o/60/60)),minutes:c,seconds:a,fullStop:n}},c=function(){var e=a();t.textContent=e.hours,n.textContent=e.minutes,o.textContent=e.seconds};if(a().timeRemaining>0){c();var l=setInterval((function(){a().fullStop?clearInterval(l):c()}),1e3)}})(),l=document.querySelector("menu"),document.body.addEventListener("click",(function(e){var t=e.target;t.closest(".menu")||t.classList.contains("close-btn")||t.matches('[href^="#"]')&&!t.closest(".portfolio-content")?l.classList.toggle("active-menu"):t&&!t.closest(".menu")&&l.classList.remove("active-menu")})),function(){var e=document.querySelector(".popup"),t=document.querySelectorAll(".popup-btn");e.style.display="block",e.style.transform="translateX(100%)";var n,o=100,r=function t(){n=requestAnimationFrame(t),--o>=0?e.style.transform="translateX(".concat(o,"%)"):cancelAnimationFrame(n)};t.forEach((function(t){t.addEventListener("click",(function(){document.body.clientWidth>768?requestAnimationFrame(r):e.style.transform="translateX(0)"}))})),e.addEventListener("click",(function(t){var n=t.target;n.classList.contains("popup-close")?(o=100,e.style.transform="translateX(100%)"):(n=n.closest(".popup-content"))||(o=100,e.style.transform="translateX(100%)")}))}(),[document.querySelector("menu"),document.querySelector("main a")].map((function(e){return e.addEventListener("click",(function(e){e.preventDefault(),function(e){var t=e.target.closest('[href^="#"]');if(t&&!t.matches('[href="#close"]')){var n,o=t.getAttribute("href").substring(1),r=document.getElementById(o).offsetTop,a=window.pageYOffset;requestAnimationFrame((function e(){n=requestAnimationFrame(e),(a+=15)<r?document.documentElement.scrollTop=a:cancelAnimationFrame(n)}))}}(e)}))})),r=document.querySelector(".service-header"),a=document.querySelectorAll(".service-header-tab"),c=document.querySelectorAll(".service-tab"),r.addEventListener("click",(function(e){var t=e.target;(t=t.closest(".service-header-tab"))&&a.forEach((function(e,n){e===t&&function(e){for(var t=0;t<c.length;t++)e===t?(a[t].classList.add("active"),c[t].classList.remove("d-none")):(a[t].classList.remove("active"),c[t].classList.add("d-none"))}(n)}))})),function(){for(var e=document.querySelector(".portfolio-content"),t=document.querySelectorAll(".portfolio-item"),n=document.querySelector(".portfolio-dots"),o=0;o<t.length;o++){var r=document.createElement("li");r.classList.add("dot"),0===o&&r.classList.add("dot-active"),n.append(r)}var a,c=document.querySelectorAll(".dot"),l=0,i=function(e,t,n){e[t].classList.remove(n)},u=function(e,t,n){e[t].classList.add(n)},s=function(){i(t,l,"portfolio-item-active"),i(c,l,"dot-active"),++l>=t.length&&(l=0),u(t,l,"portfolio-item-active"),u(c,l,"dot-active")},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;a=setInterval(s,e)};e.addEventListener("click",(function(e){e.preventDefault();var n=e.target;n.matches(".portfolio-btn, .dot")&&(i(t,l,"portfolio-item-active"),i(c,l,"dot-active"),n.matches("#arrow-right")?l++:n.matches("#arrow-left")?l--:n.matches(".dot")&&c.forEach((function(e,t){e===n&&(l=t)})),l>=t.length&&(l=0),l<0&&(l=t.length-1),u(t,l,"portfolio-item-active"),u(c,l,"dot-active"))})),e.addEventListener("mouseover",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearTimeout(a)})),e.addEventListener("mouseout",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&d()})),d(1500)}(),function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,n=document.querySelector(".calc-block"),o=document.querySelector(".calc-type"),r=document.querySelector(".calc-square"),a=document.querySelector(".calc-count"),c=document.querySelector(".calc-day"),l=document.getElementById("total"),i=0,u=function(){var n=0,u=1,s=1,d=o.options[o.selectedIndex].value,m=+r.value;if(a.value>1&&(u+=(a.value-1)/10),c.value&&c.value<5?s*=2:c.value&&c.value<10&&(s*=1.5),d&&m){n=t*d*m*u*s;var f=Math.round(n/100*24);e=setInterval((function(){i>=n?(clearInterval(e),l.textContent=Math.floor(n)):(i+=f,l.textContent=i)}),37)}else l.textContent=n};n.addEventListener("change",(function(t){var n=t.target;(n.matches("select")||n.matches("input"))&&(clearInterval(e),i=0,u())})),n.addEventListener("input",(function(e){e.target.matches("input")&&(e.target.value=e.target.value.replace(/\D/,""))}))}(100),n=document.getElementById("command"),o=function(e){if(e.target.closest(".command__photo")){var t=e.target.src;e.target.src=e.target.dataset.img,e.target.dataset.img=t}},n.addEventListener("mouseover",(function(e){o(e)})),n.addEventListener("mouseout",(function(e){o(e)})),document.querySelectorAll('[placeholder="Ваше имя"]').forEach((function(e){e.addEventListener("input",(function(){e.value=e.value.replace(/[^а-яё\s]/gi,"")})),e.addEventListener("blur",(function(){e.value=e.value.split(/\s+/).map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" ")}))})),document.querySelectorAll('[placeholder~="E-mail"]').forEach((function(e){e.addEventListener("input",(function(){e.value=e.value.replace(/[^a-z@\-_.!~*']/gi,"")})),e.addEventListener("blur",(function(){e.value=e.value.replace(/^[\s-]+|[\s-]+$/gi,"").replace(/-+/g,"-")}))})),document.querySelectorAll('[placeholder*="телефон"]').forEach((function(e){e.addEventListener("input",(function(){e.value=e.value.replace(/[^+\d]/g,"")})),e.addEventListener("blur",(function(){e.value=e.value.replace(/^[\s]+|[\s\+]{1,}$/g,"")}))})),(t=document.getElementById("form2-message")).addEventListener("input",(function(){t.value=t.value.replace(/[^а-яё\d\s\-\?;:,.!]/gi,"")})),t.addEventListener("blur",(function(){t.value=t.value.trim().replace(/\s+/g," ").replace(/-+/g,"-")})),e("form1"),e("form2"),e("form3")})();